<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="Hexo Theme Redefine"><meta name="author" content="ShenZiLi"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://evan.beee.top" crossorigin><link rel="canonical" href="https://shenzili.github.io/macinstallsd/"><meta name="robots" content="index,follow"><meta name="googlebot" content="index,follow"><meta name="revisit-after" content="1 days"><meta name="description" content="macOS安装Stable Diffusion（AI绘画）"><meta property="og:type" content="article"><meta property="og:title" content="mac安装AI绘画"><meta property="og:url" content="https://shenzili.github.io/macInstallSD/index.html"><meta property="og:site_name" content="SZL-Note"><meta property="og:description" content="macOS安装Stable Diffusion（AI绘画）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://shenzili.github.io/macInstallSD/image-20230425154531602.png"><meta property="og:image" content="https://shenzili.github.io/macInstallSD/2023-04-25_15-50-34.png"><meta property="og:image" content="https://shenzili.github.io/macInstallSD/2023-04-25_15-53-34.png"><meta property="og:image" content="https://shenzili.github.io/macInstallSD/1.jpg"><meta property="article:published_time" content="2023-04-25T06:27:38.000Z"><meta property="article:modified_time" content="2023-04-25T08:39:29.695Z"><meta property="article:author" content="ShenZiLi"><meta property="article:tag" content="Other"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://shenzili.github.io/macInstallSD/image-20230425154531602.png"><link rel="icon" type="image/png" href="/images/redefine-favicon.svg" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-favicon.svg"><meta name="theme-color" content="#A31F34"><link rel="shortcut icon" href="/images/redefine-favicon.svg"><title>mac安装AI绘画 - ZiLi NoteBook</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/assets/fonts.css"><link href="https://fonts.bunny.net/css?family=noto-sans-sc:400" rel="stylesheet"><link href="https://fonts.bunny.net/css?family=noto-sans-sc:400" rel="stylesheet"><script id="hexo-configurations">let Global=window.Global||{};Global.hexo_config={hostname:"shenzili.github.io",root:"/",language:"zh-CN"},Global.theme_config={articles:{style:{font_size:"16px",line_height:1.5,image_border_radius:"14px",image_alignment:"center",image_caption:!1,link_icon:!0},word_count:{enable:!0,count:!0,min2read:!0},author_label:{enable:!0,auto:!1,list:[""]},code_block:{copy:!0,style:"simple",font:{enable:!0,family:"Noto Sans SC",url:"https://fonts.bunny.net/css?family=noto-sans-sc:400"}},toc:{enable:!0,max_depth:3,number:!1,expand:!0,init_open:!0},copyright:!1,lazyload:!0,recommendation:{enable:!1,title:"推荐阅读",limit:3,placeholder:"/images/wallhaven-wqery6-light.webp",skip_dirs:[]}},colors:{primary:"#A31F34",secondary:null},global:{fonts:{chinese:{enable:!0,family:"Noto Sans SC",url:"https://fonts.bunny.net/css?family=noto-sans-sc:400"},english:{enable:!1,family:"JetBrains Mono",url:"https://fonts.bunny.net/css?family=jetbrains-mono:400"}},content_max_width:"1000px",sidebar_width:"210px",hover:{shadow:!0,scale:!0},scroll_progress:{bar:!1,percentage:!0},busuanzi_counter:{enable:!0,site_pv:!0,site_uv:!0,post_pv:!0},pjax:!0,open_graph:!0},home_banner:{enable:!0,image:{light:"/images/wallhaven-wqery6-light.webp",dark:"/images/wallhaven-wqery6-dark.webp"},title:"ZiLi NoteBook",subtitle:{text:["Never too old to learn","The first wealth is health","Cease to struggle and you cease to live","Keep on going and never give up"," Actions speak louder than words","The best way out is always through","Look before you leap"],hitokoto:{enable:!1,api:"https://v1.hitokoto.cn"},typing_speed:100,backing_speed:80,starting_delay:500,backing_delay:1500,loop:!0,smart_backspace:!0},text_color:{light:"#fff",dark:"#d1d1b6"},text_style:{title_size:"2.8rem",subtitle_size:"1.5rem",line_height:1.2},custom_font:{enable:!1,family:null,url:null},social_links:{enable:!1,links:{github:null,instagram:null,zhihu:null,twitter:null,email:null}}},plugins:{feed:{enable:!1},aplayer:{enable:!1,type:"fixed",audios:[{name:null,artist:null,url:null,cover:null}]},mermaid:{enable:!1,version:"9.3.0"}},version:"2.1.2",navbar:{auto_hide:!1,color:{left:"#f78736",right:"#367df7",transparency:35},links:{Home:{path:"/",icon:"fa-regular fa-house"}},search:{enable:!1,preload:!0}},page_templates:{friends_column:2,tags_style:"blur"},home:{sidebar:{enable:!0,position:"left",first_item:"menu",announcement:null,links:null},article_date_format:"YYYY-MM-DD",categories:{enable:!0,limit:3},tags:{enable:!0,limit:3}}},Global.language_ago={second:"%s 秒前",minute:"%s 分钟前",hour:"%s 小时前",day:"%s 天前",week:"%s 周前",month:"%s 个月前",year:"%s 年前"}</script><link rel="stylesheet" href="/fontawesome/fontawesome.min.css"><link rel="stylesheet" href="/fontawesome/brands.min.css"><link rel="stylesheet" href="/fontawesome/solid.min.css"><link rel="stylesheet" href="/fontawesome/regular.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="progress-bar-container"><span class="pjax-progress-bar"></span> <span class="pjax-progress-icon"><i class="fa-solid fa-circle-notch fa-spin"></i></span></div><main class="page-container"><div class="main-content-container"><div class="main-content-header"><header class="navbar-container"><div class="navbar-content"><div class="left"><a class="logo-title" href="/">ZiLi NoteBook</a></div><div class="right"><div class="desktop"><ul class="navbar-list"><li class="navbar-item"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li></ul></div><div class="mobile"><div class="icon-item navbar-bar"><div class="navbar-bar-middle"></div></div></div></div></div><div class="navbar-drawer"><ul class="drawer-navbar-list"><li class="drawer-navbar-item flex-center"><a href="/"><i class="fa-regular fa-house"></i> 首页</a></li></ul></div><div class="window-mask"></div></header></div><div class="main-content-body"><div class="main-content"><div class="fade-in-down-animation"><div class="post-page-container"><div class="article-content-container"><div class="article-title"><img src="/macInstallSD/2.jpg" alt="mac安装AI绘画"><h1 class="article-title-cover">mac安装AI绘画</h1></div><div class="article-header"><div class="avatar"><img src="/images/redefine-avatar.svg"></div><div class="info"><div class="author"><span class="name">ShenZiLi</span> <span class="author-label"></span></div><div class="meta-info"><div class="article-meta-info"><span class="article-date article-meta-item"><i class="fa-regular fa-pen-fancy"></i>&nbsp; <span class="desktop">2023-04-25 14:27:38</span> <span class="mobile">2023-04-25 14:27</span> <span class="hover-info">创建</span> </span><span class="article-date article-meta-item"><i class="fa-regular fa-wrench"></i>&nbsp; <span class="desktop">2023-04-25 16:39:29</span> <span class="mobile">2023-04-25 16:39</span> <span class="hover-info">更新</span> </span><span class="article-tags article-meta-item"><i class="fa-regular fa-tags"></i>&nbsp;<ul><li><a href="/tags/Other/">Other</a>&nbsp;</li></ul></span><span class="article-wordcount article-meta-item"><i class="fa-regular fa-typewriter"></i>&nbsp;<span>1.1k 字</span> </span><span class="article-min2read article-meta-item"><i class="fa-regular fa-clock"></i>&nbsp;<span>4 分钟</span> </span><span class="article-pv article-meta-item"><i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span></span></div></div></div></div><div class="article-content markdown-body"><h1 id="说明"><a class="markdownIt-Anchor" href="#说明">#</a> 说明</h1><p>本教程为安装 macOS 端 AI 绘画（Stable Diffusion WebUI），无需科学上网</p><p>AI 绘画 Stable Diffusion WebUI 在 windows 端可以通过整合包的方式进行部署，但在 macOS 缺少相关资源。有许多同学没有编程基础，卡在<strong> Install gfpgan</strong> 反复尝试无果，本教程是为帮助在 Mac 上安装 SD 遇到困难的同学们。</p><h2 id="安装"><a class="markdownIt-Anchor" href="#安装">#</a> 安装</h2><h3 id="环境配置"><a class="markdownIt-Anchor" href="#环境配置">#</a> 环境配置</h3><ol><li><p>下载安装 Git</p><blockquote><p>Git 是代码版本控制工具，此处用于克隆 GitHub 代码仓库中的 Web UI 以及相关插件依赖。</p></blockquote><p>在<strong>终端</strong>复制以下命令并回车，可检测当前电脑有没有安装 git。如果已经存在 git，则输出 Git 版本号，否则请下载安装 git，通常耗时 5 分钟。</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br></pre></td></tr></table></figure></div><p>点击链接<a class="link" target="_blank" rel="noopener" href="https://sourceforge.net/projects/git-osx-installer/files/latest/download"> Git MacOS <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>，浏览器下载。下载完成后请自行安装。</p></li><li><p>安装 Homebrew</p><blockquote><p>Homebrew 是 MacOS 的包管理工具，此处用于安装 Python 环境。</p></blockquote><p>在<strong>终端</strong>复制以下命令并回车，此处使用托管于国内 Gitee 仓库的 Homebrew，通常耗时 10-20 分钟。</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure></div><p>镜像源可选择<strong> 1 中科大</strong>，如安装过程中下载过慢（&lt;100Kb/s）或报错可使用<strong> Command+C</strong> 打断，并重新执行上述命令或选择其他镜像源（有时候重复两三次即可安装成功）。</p><p>安装完成后，退出终端并重新打开（仅安装 Homebrew 后需要重启终端，后续无需重启）。执行查看 Homebrew 版本</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew -v</span><br></pre></td></tr></table></figure></div><p>如有异常信息，则复制提示的两句 git 命令并执行。然后再次<strong> brew -v</strong> 检查是否异常。</p></li><li><p>安装 Python 等环境</p><p>使用刚安装好的 Homebrew 命令安装 python 等环境，通常耗时 10-20 分钟。</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install cmake protobuf rust python@3.10 git wget</span><br></pre></td></tr></table></figure></div></li><li><p>安装（克隆）WebUI</p><blockquote><p>Stable Diffusion 是稳定扩散模型，是 AI 绘画的核心。通常 checkpoint 模型都是基于 SD 1.5 版本模型训练而成，SD 2.0 开始官方加入了和谐补丁，所以从这方面来说 AI 绘画并不是版本越新越好。</p><p>Stable Diffusion WebUI 是通过浏览器运行的可视化页面，降低了原先通过命令行使用 SD 的门槛。但更新 WebUI 和插件，往往会导致各种 Bug，依旧建议版本不是越新越好，而是越稳定越好。</p></blockquote><p>以下方式二选一</p><p>由于后续启动 WebUI 会下载 checkpoint 模型，速度过慢，所以需要提前下载大模型并放置到正确位置，脚本检测到已有大模型时，跳过下载。</p><ol><li>克隆 webUI，并下载随意一个 checkpoint 模型</li></ol><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui</span><br></pre></td></tr></table></figure></div><ol start="2"><li><p>下载我提前打好的包，减少踩坑</p><p><a class="link" target="_blank" rel="noopener" href="https://www.123pan.com/s/ssl7Vv-eBzJ.html">123 网盘 SD + 模型打包 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>提取码:vivi，使用迅雷可满速下载，浏览器较慢。</p></li></ol></li><li><p>启动 WebUI【重要】</p><p>首次启动会下载依赖，一般都卡在这里。卡住的原因是由于很多依赖都是从 Github 上下载，国外地址速度过慢会导致报错。所以我们可以使用镜像源或直接采用国内 Gitee 上托管的代码。为此，你需要修改两个文件。</p><p><strong><a class="link" target="_blank" rel="noopener" href="http://xn--webui-macos-env-gm6xp4jn50kmhb.sh">修改文件 webui-macos-env.sh <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></strong></p><p>安装 torch，添加镜像源，注意空格</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export TORCH_COMMAND=&quot;pip install torch==1.12.1 torchvision==0.13.1 -i https://pypi.douban.com/simple/&quot;</span><br></pre></td></tr></table></figure></div><img lazyload src="/images/loading.svg" data-src="/macInstallSD/image-20230425154531602.png" title="image-20230425154531602"><p><strong><a class="link" target="_blank" rel="noopener" href="http://xn--launch-h18i79dyz0gkwa.py">修改文件 launch.py <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></strong></p><p>pip 安装添加镜像源</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return run(f&#x27;&quot;&#123;python&#125;&quot; -m pip &#123;args&#125; -i https://pypi.douban.com/simple/ --prefer-binary&#123;index_url_line&#125;&#x27;, desc=f&quot;Installing &#123;desc&#125;&quot;, errdesc=f&quot;Couldn&#x27;t install &#123;desc&#125;&quot;)</span><br></pre></td></tr></table></figure></div><img lazyload src="/images/loading.svg" data-src="/macInstallSD/2023-04-25_15-50-34.png" title="2023-04-25_15-50-34"><p><strong>替换为 Gitee 代码仓库地址</strong></p><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gfpgan_package = os.environ.get(<span class="string">&#x27;GFPGAN_PACKAGE&#x27;</span>, <span class="string">&quot;git+https://gitee.com/zdevt/GFPGAN.git&quot;</span>)</span><br><span class="line">clip_package = os.environ.get(<span class="string">&#x27;CLIP_PACKAGE&#x27;</span>, <span class="string">&quot;git+https://gitee.com/zdevt/CLIP.git&quot;</span>)</span><br><span class="line">openclip_package = os.environ.get(<span class="string">&#x27;OPENCLIP_PACKAGE&#x27;</span>, <span class="string">&quot;git+https://gitee.com/zdevt/open_clip.git&quot;</span>)</span><br></pre></td></tr></table></figure></div><img lazyload src="/images/loading.svg" data-src="/macInstallSD/2023-04-25_15-53-34.png" title="2023-04-25_15-53-34"><p><strong>打开终端，启动 WebUI</strong></p><p>在 WebUI 文件夹右键启动终端，也可在终端中通过 cd 命令进入到该文件夹。输入命令回车启动，后续启动 AI 绘画都要通过这个方式。</p><div class="highlight-container" data-rel="Shell"><figure class="iseeu highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./webui.sh</span><br></pre></td></tr></table></figure></div><p>等待安装，由于依旧修改为国内地址并添加了镜像源，通常需要 10 分钟。</p><p>如果异常可再次 **./webui.sh** 启动，尝试两三次依旧失败请贴图寻求帮助。</p><p><strong>启动成功</strong>，终端会打印访问地址，点击跳转浏览器即可使用</p><img lazyload src="/images/loading.svg" data-src="/macInstallSD/1.jpg" width="1"></li></ol></div><ul class="post-tags-box"><li class="tag-item"><a href="/tags/Other/">#Other</a>&nbsp;</li></ul><div class="article-nav"><div class="article-next"><a class="next" rel="next" href="/Introduce/"><span class="title flex-center"><span class="post-nav-title-item">Introduce</span> <span class="post-nav-item">下一篇</span> </span><span class="right arrow-icon flex-center"><i class="fa-solid fa-chevron-right"></i></span></a></div></div></div><div class="toc-content-container"><div class="post-toc-wrap"><div class="post-toc"><div class="toc-title">此页目录</div><div class="page-title">mac安装AI绘画</div><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="nav-text">说明</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-text">环境配置</span></a></li></ol></li></ol></li></ol></div></div></div></div></div></div></div><div class="main-content-footer"><footer class="footer"><div class="info-container"><div class="copyright-info">&copy; <span>2022</span> - 2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration:0.5s;color:#f54545"></i>&nbsp;&nbsp;<a href="/">ShenZiLi</a></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="website-count info-item"><span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span></span></div><div class="theme-info info-item"><span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span><br><span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a></span></div></div></footer></div></div><div class="post-tools"><div class="post-tools-container"><ul class="article-tools-list"><li class="right-bottom-tools page-aside-toggle"><i class="fa-regular fa-outdent"></i></li></ul></div></div><div class="right-side-tools-container"><div class="side-tools-container"><ul class="hidden-tools-list"><li class="right-bottom-tools tool-font-adjust-plus flex-center"><i class="fa-regular fa-magnifying-glass-plus"></i></li><li class="right-bottom-tools tool-font-adjust-minus flex-center"><i class="fa-regular fa-magnifying-glass-minus"></i></li><li class="right-bottom-tools tool-expand-width flex-center"><i class="fa-regular fa-expand"></i></li><li class="right-bottom-tools tool-dark-light-toggle flex-center"><i class="fa-regular fa-moon"></i></li><li class="right-bottom-tools tool-scroll-to-bottom flex-center"><i class="fa-regular fa-arrow-down"></i></li></ul><ul class="visible-tools-list"><li class="right-bottom-tools toggle-tools-list flex-center"><i class="fa-regular fa-cog fa-spin"></i></li><li class="right-bottom-tools tool-scroll-to-top flex-center"><i class="arrow-up fas fa-arrow-up"></i> <span class="percent"></span></li></ul></div></div><div class="image-viewer-container"><img src=""></div></main><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/layouts/navbarShrink.js"></script><script src="/js/tools/scrollTopBottom.js"></script><script src="/js/tools/lightDarkSwitch.js"></script><script src="/js/tools/codeBlock.js"></script><script src="/js/layouts/lazyload.js"></script><script src="/js/libs/Typed.min.js"></script><script src="/js/plugins/typed.js"></script><div class="post-scripts pjax"><script src="/js/tools/tocToggle.js"></script><script src="/js/libs/anime.min.js"></script><script src="/js/layouts/toc.js"></script><script src="/js/plugins/tabs.js"></script></div><script src="/js/libs/pjax.min.js"></script><script>window.addEventListener("DOMContentLoaded",()=>{window.pjax=new Pjax({selectors:["head title",".page-container",".pjax"],history:!0,debug:!1,cacheBust:!1,timeout:0,analytics:!1,currentUrlFullReload:!1,scrollRestoration:!1}),document.addEventListener("pjax:send",()=>{Global.utils.pjaxProgressBarStart()}),document.addEventListener("pjax:complete",()=>{Global.utils.pjaxProgressBarEnd(),window.pjax.executeScripts(document.querySelectorAll("script[data-pjax], .pjax script")),Global.refresh()})})</script></body></html>