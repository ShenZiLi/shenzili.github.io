{
    "version": "https://jsonfeed.org/version/1",
    "title": "SZL-Note • All posts by \"other\" tag",
    "description": "记录学习过程",
    "home_page_url": "https://shenzili.github.io",
    "items": [
        {
            "id": "https://shenzili.github.io/macInstallSD/",
            "url": "https://shenzili.github.io/macInstallSD/",
            "title": "mac安装AI绘画",
            "date_published": "2023-04-25T06:27:38.000Z",
            "content_html": "<h1 id=\"说明\"><a class=\"markdownIt-Anchor\" href=\"#说明\">#</a> 说明</h1>\n<p>本教程为安装 macOS 端 AI 绘画（Stable Diffusion WebUI），无需科学上网</p>\n<p>AI 绘画 Stable Diffusion WebUI 在 windows 端可以通过整合包的方式进行部署，但在 macOS 缺少相关资源。有许多同学没有编程基础，卡在<strong> Install gfpgan</strong> 反复尝试无果，本教程是为帮助在 Mac 上安装 SD 遇到困难的同学们。</p>\n<h1 id=\"安装\"><a class=\"markdownIt-Anchor\" href=\"#安装\">#</a> 安装</h1>\n<h2 id=\"配置环境\"><a class=\"markdownIt-Anchor\" href=\"#配置环境\">#</a> 配置环境</h2>\n<h3 id=\"下载安装git\"><a class=\"markdownIt-Anchor\" href=\"#下载安装git\">#</a> 下载安装 Git</h3>\n<blockquote>\n<p>Git 是代码版本控制工具，此处用于克隆 GitHub 代码仓库中的 Web UI 以及相关插件依赖。</p>\n</blockquote>\n<p>在<strong>终端</strong>复制以下命令并回车，可检测当前电脑有没有安装 git。如果已经存在 git，则输出 Git 版本号，否则请下载安装 git，通常耗时 5 分钟。</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git --version</span><br></pre></td></tr></table></figure></div>\n<p>点击链接<a class=\"link\"   href=\"https://sourceforge.net/projects/git-osx-installer/files/latest/download\" > Git MacOS <i class=\"fa-regular fa-arrow-up-right-from-square fa-sm\"></i></a>，浏览器下载。下载完成后请自行安装。</p>\n<h3 id=\"安装homebrew\"><a class=\"markdownIt-Anchor\" href=\"#安装homebrew\">#</a> 安装 Homebrew</h3>\n<blockquote>\n<p>Homebrew 是 MacOS 的包管理工具，此处用于安装 Python 环境。</p>\n</blockquote>\n<p>在<strong>终端</strong>复制以下命令并回车，此处使用托管于国内 Gitee 仓库的 Homebrew，通常耗时 10-20 分钟。</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/bin/zsh -c &quot;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&quot;</span><br></pre></td></tr></table></figure></div>\n<p>镜像源可选择<strong> 1 中科大</strong>，如安装过程中下载过慢（&lt;100Kb/s）或报错可使用<strong> Command+C</strong> 打断，并重新执行上述命令或选择其他镜像源（有时候重复两三次即可安装成功）。</p>\n<p>安装完成后，退出终端并重新打开（仅安装 Homebrew 后需要重启终端，后续无需重启）。执行查看 Homebrew 版本</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew -v</span><br></pre></td></tr></table></figure></div>\n<p>如有异常信息，则复制提示的两句 git 命令并执行。然后再次<strong> brew -v</strong> 检查是否异常。</p>\n<h3 id=\"安装python等环境\"><a class=\"markdownIt-Anchor\" href=\"#安装python等环境\">#</a> 安装 Python 等环境</h3>\n<p>使用刚安装好的 Homebrew 命令安装 python 等环境，通常耗时 10-20 分钟。</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install cmake protobuf rust python@3.10 git wget</span><br></pre></td></tr></table></figure></div>\n<h2 id=\"克隆webui\"><a class=\"markdownIt-Anchor\" href=\"#克隆webui\">#</a> 克隆 WebUI</h2>\n<blockquote>\n<p>Stable Diffusion 是稳定扩散模型，是 AI 绘画的核心。通常 checkpoint 模型都是基于 SD 1.5 版本模型训练而成，SD 2.0 开始官方加入了和谐补丁，所以从这方面来说 AI 绘画并不是版本越新越好。</p>\n<p>Stable Diffusion WebUI 是通过浏览器运行的可视化页面，降低了原先通过命令行使用 SD 的门槛。但更新 WebUI 和插件，往往会导致各种 Bug，依旧建议版本不是越新越好，而是越稳定越好。</p>\n</blockquote>\n<p>以下方式二选一</p>\n<p>由于后续启动 WebUI 会下载 checkpoint 模型，速度过慢，所以需要提前下载大模型并放置到正确位置，脚本检测到已有大模型时，跳过下载。</p>\n<ol>\n<li>克隆 webUI，并下载随意一个 checkpoint 模型</li>\n</ol>\n   <div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui</span><br></pre></td></tr></table></figure></div>\n<ol start=\"2\">\n<li>下载我提前打好的包，减少踩坑</li>\n</ol>\n<p><a class=\"link\"   href=\"https://www.123pan.com/s/ssl7Vv-eBzJ.html\" >123 网盘 SD + 模型打包 <i class=\"fa-regular fa-arrow-up-right-from-square fa-sm\"></i></a>提取码:vivi，使用迅雷可满速下载，浏览器较慢。</p>\n<h1 id=\"启动重要\"><a class=\"markdownIt-Anchor\" href=\"#启动重要\">#</a> 启动【重要】</h1>\n<p>首次启动会下载依赖，一般都卡在这里。卡住的原因是由于很多依赖都是从 Github 上下载，国外地址速度过慢会导致报错。所以我们可以使用镜像源或直接采用国内 Gitee 上托管的代码。为此，你需要修改两个文件。</p>\n<h2 id=\"修改webui-macos-envsh\"><a class=\"markdownIt-Anchor\" href=\"#修改webui-macos-envsh\">#</a> <a class=\"link\"   href=\"http://xn--webui-macos-env-tu9xw16x.sh\" >修改 webui-macos-env.sh <i class=\"fa-regular fa-arrow-up-right-from-square fa-sm\"></i></a></h2>\n<p>安装 torch，添加镜像源，注意空格</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export TORCH_COMMAND=&quot;pip install torch==1.12.1 torchvision==0.13.1 -i https://pypi.douban.com/simple/&quot;</span><br></pre></td></tr></table></figure></div>\n<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"/macInstallSD/image-20230425154531602.png\"\n                      class=\"\" title=\"image-20230425154531602\"\n                >\n<h2 id=\"修改launchpy\"><a class=\"markdownIt-Anchor\" href=\"#修改launchpy\">#</a> <a class=\"link\"   href=\"http://xn--launch-2g0js76l.py\" >修改 launch.py <i class=\"fa-regular fa-arrow-up-right-from-square fa-sm\"></i></a></h2>\n<ul>\n<li>pip 安装添加镜像源</li>\n</ul>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">return run(f&#x27;&quot;&#123;python&#125;&quot; -m pip &#123;args&#125; -i https://pypi.douban.com/simple/ --prefer-binary&#123;index_url_line&#125;&#x27;, desc=f&quot;Installing &#123;desc&#125;&quot;, errdesc=f&quot;Couldn&#x27;t install &#123;desc&#125;&quot;)</span><br></pre></td></tr></table></figure></div>\n<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"/macInstallSD/2023-04-25_15-50-34.png\"\n                      class=\"\" title=\"2023-04-25_15-50-34\"\n                >\n<ul>\n<li>替换为 Gitee 代码仓库地址</li>\n</ul>\n<div class=\"highlight-container\" data-rel=\"Python\"><figure class=\"iseeu highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gfpgan_package = os.environ.get(<span class=\"string\">&#x27;GFPGAN_PACKAGE&#x27;</span>, <span class=\"string\">&quot;git+https://gitee.com/zdevt/GFPGAN.git&quot;</span>)</span><br><span class=\"line\">clip_package = os.environ.get(<span class=\"string\">&#x27;CLIP_PACKAGE&#x27;</span>, <span class=\"string\">&quot;git+https://gitee.com/zdevt/CLIP.git&quot;</span>)</span><br><span class=\"line\">openclip_package = os.environ.get(<span class=\"string\">&#x27;OPENCLIP_PACKAGE&#x27;</span>, <span class=\"string\">&quot;git+https://gitee.com/zdevt/open_clip.git&quot;</span>)</span><br></pre></td></tr></table></figure></div>\n<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"/macInstallSD/2023-04-25_15-53-34.png\"\n                      class=\"\" title=\"2023-04-25_15-53-34\"\n                >\n<h2 id=\"启动webui\"><a class=\"markdownIt-Anchor\" href=\"#启动webui\">#</a> 启动 WebUI</h2>\n<p>在 WebUI 文件夹右键启动终端，也可在终端中通过 cd 命令进入到该文件夹。输入命令回车启动，后续启动 AI 绘画都要通过这个方式。</p>\n<div class=\"highlight-container\" data-rel=\"Shell\"><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./webui.sh</span><br></pre></td></tr></table></figure></div>\n<p>等待安装，由于依旧修改为国内地址并添加了镜像源，通常需要 10 分钟。</p>\n<p>如果异常可再次 **./webui.sh** 启动，尝试两三次依旧失败请贴图寻求帮助。</p>\n<ul>\n<li>\n<p>启动成功</p>\n<p>终端会打印访问地址，点击跳转浏览器即可使用</p>\n</li>\n</ul>\n<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"/macInstallSD/1.jpg\"\n                      class=\"\" width=\"1234\"\n                >\n",
            "tags": [
                "Other"
            ]
        },
        {
            "id": "https://shenzili.github.io/Introduce/",
            "url": "https://shenzili.github.io/Introduce/",
            "title": "Introduce",
            "date_published": "2023-04-19T16:00:00.000Z",
            "content_html": "<h2 id=\"welcome\"><a class=\"markdownIt-Anchor\" href=\"#welcome\">#</a> Welcome</h2>\n<p>这里是 ShenZiLi 的知识小站，使用 Hexo 引擎，Redefine 主题</p>\n<p><a class=\"link\"   href=\"https://github.com/ShenZiLi/shenzili.github.io\" >ShenZiLi/shenzili.github.io <i class=\"fa-regular fa-arrow-up-right-from-square fa-sm\"></i></a></p>\n<h3 id=\"主题config自定义\"><a class=\"markdownIt-Anchor\" href=\"#主题config自定义\">#</a> 主题 config 自定义</h3>\n<div class=\"highlight-container\" data-rel=\"Yaml\"><figure class=\"iseeu highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">global:</span></span><br><span class=\"line\">  <span class=\"attr\">hover:</span></span><br><span class=\"line\">    <span class=\"attr\">scale:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"comment\"># Custom fonts</span></span><br><span class=\"line\">  <span class=\"attr\">fonts:</span></span><br><span class=\"line\">    <span class=\"comment\"># Chinese fonts</span></span><br><span class=\"line\">    <span class=\"attr\">chinese:</span> </span><br><span class=\"line\">      <span class=\"attr\">enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Whether to enable custom chinese font</span></span><br><span class=\"line\">      <span class=\"attr\">family:</span> <span class=\"string\">Noto</span> <span class=\"string\">Sans</span> <span class=\"string\">SC</span> <span class=\"comment\"># Font family</span></span><br><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">https://fonts.bunny.net/css?family=noto-sans-sc:400</span> <span class=\"comment\"># Font URL to CSS file</span></span><br><span class=\"line\">    <span class=\"comment\"># English fonts</span></span><br><span class=\"line\">    <span class=\"attr\">english:</span> </span><br><span class=\"line\">      <span class=\"attr\">enable:</span> <span class=\"literal\">false</span> <span class=\"comment\"># Whether to enable custom chinese font</span></span><br><span class=\"line\">      <span class=\"attr\">family:</span> <span class=\"string\">JetBrains</span> <span class=\"string\">Mono</span> <span class=\"comment\"># Font family</span></span><br><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">https://fonts.bunny.net/css?family=jetbrains-mono:400</span> <span class=\"comment\"># Font URL to CSS file</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">info:</span></span><br><span class=\"line\">  <span class=\"attr\">title:</span> <span class=\"string\">ZiLi</span> <span class=\"string\">NoteBook</span></span><br><span class=\"line\">  <span class=\"attr\">author:</span> <span class=\"string\">ShenZiLi</span></span><br><span class=\"line\">  <span class=\"attr\">url:</span> <span class=\"string\">https://github.com/ShenZiLi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">home_banner:</span></span><br><span class=\"line\">  <span class=\"attr\">title:</span> <span class=\"string\">ZiLi</span> <span class=\"string\">NoteBook</span></span><br><span class=\"line\">  <span class=\"attr\">subtitle:</span> </span><br><span class=\"line\">    <span class=\"attr\">text:</span> [<span class=\"string\">&quot;Never too old to learn&quot;</span>,<span class=\"string\">&quot;The first wealth is health&quot;</span>,<span class=\"string\">&quot;Cease to struggle and you cease to live&quot;</span>,<span class=\"string\">&quot;Keep on going and never give up&quot;</span>,<span class=\"string\">&quot; Actions speak louder than words&quot;</span>,<span class=\"string\">&quot;The best way out is always through&quot;</span>,<span class=\"string\">&quot;Look before you leap&quot;</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">articles:</span></span><br><span class=\"line\">  <span class=\"attr\">word_count:</span></span><br><span class=\"line\">    <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">code_block:</span></span><br><span class=\"line\">    <span class=\"attr\">style:</span> <span class=\"string\">simple</span></span><br><span class=\"line\">    <span class=\"attr\">font:</span> <span class=\"comment\"># Custom font</span></span><br><span class=\"line\">      <span class=\"attr\">enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Whether to enable</span></span><br><span class=\"line\">      <span class=\"attr\">family:</span> <span class=\"string\">Noto</span> <span class=\"string\">Sans</span> <span class=\"string\">SC</span> <span class=\"comment\"># Font family</span></span><br><span class=\"line\">      <span class=\"attr\">url:</span> <span class=\"string\">https://fonts.bunny.net/css?family=noto-sans-sc:400</span></span><br><span class=\"line\">  <span class=\"attr\">copyright:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">comment:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">footer:</span></span><br><span class=\"line\">  <span class=\"attr\">runtime:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\"># 中文测试</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"插入图片测试\"><a class=\"markdownIt-Anchor\" href=\"#插入图片测试\">#</a> 插入图片测试</h3>\n<img  \n                     lazyload\n                     src=\"/images/loading.svg\"\n                     data-src=\"/Introduce/1.png\"\n                      class=\"\" title=\"image-20230420084058218\"\n                >\n<h3 id=\"代码高亮测试\"><a class=\"markdownIt-Anchor\" href=\"#代码高亮测试\">#</a> 代码高亮测试</h3>\n<div class=\"highlight-container\" data-rel=\"Java\"><figure class=\"iseeu highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">Test01</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title function_\">main</span><span class=\"params\">(String[] args)</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 中文注释</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">&quot;I want to be a great Javaer&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<div class=\"highlight-container\" data-rel=\"Xml\"><figure class=\"iseeu highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.springframework.boot<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>spring-boot-starter-web<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n",
            "tags": [
                "Other"
            ]
        }
    ]
}